(()=>{var __webpack_modules__={699:()=>{eval('{    document.addEventListener(\'DOMContentLoaded\', function() {\r\n\r\n        // Page contact\r\n    var contact = document.getElementById("contact-form")\r\n    if (contact)\r\n        contact.addEventListener(\'submit\', async function (e) {\r\n            e.preventDefault();\r\n\r\n                // === Formulaire de contact avec reCAPTCHA et API ===\r\n                const firstname = document.getElementById(\'firstname\').value;\r\n                const lastname = document.getElementById(\'lastname\').value;\r\n                const email = document.getElementById(\'email\').value;\r\n                const subject = document.getElementById(\'subject\').value;\r\n                const message = document.getElementById(\'message\').value;\r\n\r\n                const token = grecaptcha.getResponse();\r\n                if (!token) {\r\n                    alert("Veuillez valider le reCAPTCHA.");\r\n                    return;\r\n                }\r\n\r\n                try {\r\n                    const response = await fetch(\'/api/contact/send\', {\r\n                        method: \'POST\',\r\n                        headers: { \'Content-Type\': \'application/json\' },\r\n                        body: JSON.stringify({ firstname,lastname, email, subject, message, token })\r\n                    });\r\n\r\n                    const data = await response.json();\r\n                    alert(data.message);\r\n                    if (response.ok) {\r\n                        this.reset();\r\n                        grecaptcha.reset();\r\n                    }\r\n                } catch (error) {\r\n                    alert("Erreur lors de l\'envoi. Veuillez réessayer.");\r\n                    console.error(error);\r\n                }\r\n\r\n                // === Autres formulaires ===\r\n                alert(\'Formulaire envoyé.\');\r\n                this.reset();\r\n        \r\n    });\r\n\r\n    //Bilan energetique\r\n    const nextBtns = document.querySelectorAll(".next-btn");\r\n    const prevBtns = document.querySelectorAll(".prev-btn");\r\n    const steps = document.querySelectorAll(".form-step");\r\n  const progressBar = document.getElementById("progress-bar");\r\n  let currentStep = 0;\r\n\r\n  function updateFormSteps() {\r\n    steps.forEach((step, index) => {\r\n      step.classList.toggle("active", index === currentStep);\r\n    });\r\n\r\n    // Progression en %\r\n    let progress = (currentStep) / (steps.length - 1) * 100;\r\n    progressBar.style.width = progress + "%";\r\n\r\n    // Activer les numéros\r\n    document.querySelectorAll(".progress-step").forEach((step, idx) => {\r\n      step.classList.toggle("active", idx <= currentStep);\r\n    });\r\n  }\r\n// Validation d’une étape\r\nfunction validateStep(stepIndex) {\r\n  const step = steps[stepIndex];\r\n  const inputs = step.querySelectorAll("input, select, textarea");\r\n\r\n  let valid = true;\r\n\r\n  for (let input of inputs) {\r\n    if (input.type === "radio") {\r\n      // Vérifie qu’au moins un radio du même groupe est coché\r\n      const radios = step.querySelectorAll(`input[name="${input.name}"]`);\r\n      if (![...radios].some(r => r.checked)) {\r\n        radios[0].setCustomValidity("Veuillez sélectionner une option."); \r\n        radios[0].reportValidity(); // affiche le tooltip natif\r\n        valid = false;\r\n        break;\r\n      } else {\r\n        radios.forEach(r => r.setCustomValidity("")); // reset si ok\r\n      }\r\n    } else if (!input.checkValidity()) {\r\n      input.reportValidity(); // déclenche le tooltip du navigateur\r\n      valid = false;\r\n      break;\r\n    }\r\n  }\r\n\r\n  return valid;\r\n}\r\n\r\n\r\nnextBtns.forEach(btn => {\r\n  btn.addEventListener("click", () => {\r\n    if (validateStep(currentStep)) {\r\n      currentStep++;\r\n      updateFormSteps();\r\n    }\r\n  });\r\n});\r\n\r\n  // Précédent\r\n  prevBtns.forEach(btn => {\r\n    btn.addEventListener("click", () => {\r\n      currentStep--;\r\n      updateFormSteps();\r\n    });\r\n  });\r\n  \r\n  // Soumission finale\r\nvar audit = document.getElementById("audit-form")\r\nif (audit)\r\n  audit.addEventListener("submit", async (e) => {\r\n    e.preventDefault();\r\n\r\n    const formData = new FormData(e.target);\r\n    const data = Object.fromEntries(formData.entries());\r\n\r\n    const token = grecaptcha.getResponse();\r\n    if (!token) {\r\n      alert("Veuillez valider le reCAPTCHA.");\r\n      return;\r\n    }\r\n    data.token = token;\r\n\r\n    try {\r\n      const response = await fetch(\'/api/contact/sendBilan\', {\r\n        method: \'POST\',\r\n        headers: { \'Content-Type\': \'application/json\' },\r\n        body: JSON.stringify(data)\r\n      });\r\n      const res = await response.json();\r\n      alert(res.message || "Formulaire envoyé !");\r\n      if (response.ok) {\r\n        e.target.reset();\r\n        grecaptcha.reset();\r\n        currentStep = 0;\r\n      }\r\n    } catch (err) {\r\n      alert("Erreur lors de l\'envoi");\r\n      console.error(err);\r\n    }\r\n  });\r\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiNjk5LmpzIiwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQyxvQ0FBb0M7QUFDdkUsK0NBQStDLG9EQUFvRDtBQUNuRyxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBEQUEwRCxXQUFXO0FBQ3JFO0FBQ0E7QUFDQSxvQ0FBb0M7QUFDcEM7QUFDQTtBQUNBLFFBQVE7QUFDUixzREFBc0Q7QUFDdEQ7QUFDQSxNQUFNO0FBQ04sOEJBQThCO0FBQzlCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLG9DQUFvQztBQUN2RDtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL2NsaWVudC8uL3NyYy9qYXZhc2NyaXB0cy9jb250YWN0LmpzPzVkYzMiXSwic291cmNlc0NvbnRlbnQiOlsiICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgLy8gUGFnZSBjb250YWN0XHJcbiAgICB2YXIgY29udGFjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiY29udGFjdC1mb3JtXCIpXHJcbiAgICBpZiAoY29udGFjdClcclxuICAgICAgICBjb250YWN0LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIGFzeW5jIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyA9PT0gRm9ybXVsYWlyZSBkZSBjb250YWN0IGF2ZWMgcmVDQVBUQ0hBIGV0IEFQSSA9PT1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpcnN0bmFtZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmaXJzdG5hbWUnKS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxhc3RuYW1lID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2xhc3RuYW1lJykudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbWFpbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdlbWFpbCcpLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3ViamVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzdWJqZWN0JykudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ21lc3NhZ2UnKS52YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0b2tlbiA9IGdyZWNhcHRjaGEuZ2V0UmVzcG9uc2UoKTtcclxuICAgICAgICAgICAgICAgIGlmICghdG9rZW4pIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChcIlZldWlsbGV6IHZhbGlkZXIgbGUgcmVDQVBUQ0hBLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCcvYXBpL2NvbnRhY3Qvc2VuZCcsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnM6IHsgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGZpcnN0bmFtZSxsYXN0bmFtZSwgZW1haWwsIHN1YmplY3QsIG1lc3NhZ2UsIHRva2VuIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoZGF0YS5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBncmVjYXB0Y2hhLnJlc2V0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChcIkVycmV1ciBsb3JzIGRlIGwnZW52b2kuIFZldWlsbGV6IHLDqWVzc2F5ZXIuXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vID09PSBBdXRyZXMgZm9ybXVsYWlyZXMgPT09XHJcbiAgICAgICAgICAgICAgICBhbGVydCgnRm9ybXVsYWlyZSBlbnZvecOpLicpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZXNldCgpO1xyXG4gICAgICAgIFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy9CaWxhbiBlbmVyZ2V0aXF1ZVxyXG4gICAgY29uc3QgbmV4dEJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLm5leHQtYnRuXCIpO1xyXG4gICAgY29uc3QgcHJldkJ0bnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnByZXYtYnRuXCIpO1xyXG4gICAgY29uc3Qgc3RlcHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLmZvcm0tc3RlcFwiKTtcclxuICBjb25zdCBwcm9ncmVzc0JhciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicHJvZ3Jlc3MtYmFyXCIpO1xyXG4gIGxldCBjdXJyZW50U3RlcCA9IDA7XHJcblxyXG4gIGZ1bmN0aW9uIHVwZGF0ZUZvcm1TdGVwcygpIHtcclxuICAgIHN0ZXBzLmZvckVhY2goKHN0ZXAsIGluZGV4KSA9PiB7XHJcbiAgICAgIHN0ZXAuY2xhc3NMaXN0LnRvZ2dsZShcImFjdGl2ZVwiLCBpbmRleCA9PT0gY3VycmVudFN0ZXApO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gUHJvZ3Jlc3Npb24gZW4gJVxyXG4gICAgbGV0IHByb2dyZXNzID0gKGN1cnJlbnRTdGVwKSAvIChzdGVwcy5sZW5ndGggLSAxKSAqIDEwMDtcclxuICAgIHByb2dyZXNzQmFyLnN0eWxlLndpZHRoID0gcHJvZ3Jlc3MgKyBcIiVcIjtcclxuXHJcbiAgICAvLyBBY3RpdmVyIGxlcyBudW3DqXJvc1xyXG4gICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5wcm9ncmVzcy1zdGVwXCIpLmZvckVhY2goKHN0ZXAsIGlkeCkgPT4ge1xyXG4gICAgICBzdGVwLmNsYXNzTGlzdC50b2dnbGUoXCJhY3RpdmVcIiwgaWR4IDw9IGN1cnJlbnRTdGVwKTtcclxuICAgIH0pO1xyXG4gIH1cclxuLy8gVmFsaWRhdGlvbiBk4oCZdW5lIMOpdGFwZVxyXG5mdW5jdGlvbiB2YWxpZGF0ZVN0ZXAoc3RlcEluZGV4KSB7XHJcbiAgY29uc3Qgc3RlcCA9IHN0ZXBzW3N0ZXBJbmRleF07XHJcbiAgY29uc3QgaW5wdXRzID0gc3RlcC5xdWVyeVNlbGVjdG9yQWxsKFwiaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWFcIik7XHJcblxyXG4gIGxldCB2YWxpZCA9IHRydWU7XHJcblxyXG4gIGZvciAobGV0IGlucHV0IG9mIGlucHV0cykge1xyXG4gICAgaWYgKGlucHV0LnR5cGUgPT09IFwicmFkaW9cIikge1xyXG4gICAgICAvLyBWw6lyaWZpZSBxdeKAmWF1IG1vaW5zIHVuIHJhZGlvIGR1IG3Dqm1lIGdyb3VwZSBlc3QgY29jaMOpXHJcbiAgICAgIGNvbnN0IHJhZGlvcyA9IHN0ZXAucXVlcnlTZWxlY3RvckFsbChgaW5wdXRbbmFtZT1cIiR7aW5wdXQubmFtZX1cIl1gKTtcclxuICAgICAgaWYgKCFbLi4ucmFkaW9zXS5zb21lKHIgPT4gci5jaGVja2VkKSkge1xyXG4gICAgICAgIHJhZGlvc1swXS5zZXRDdXN0b21WYWxpZGl0eShcIlZldWlsbGV6IHPDqWxlY3Rpb25uZXIgdW5lIG9wdGlvbi5cIik7IFxyXG4gICAgICAgIHJhZGlvc1swXS5yZXBvcnRWYWxpZGl0eSgpOyAvLyBhZmZpY2hlIGxlIHRvb2x0aXAgbmF0aWZcclxuICAgICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHJhZGlvcy5mb3JFYWNoKHIgPT4gci5zZXRDdXN0b21WYWxpZGl0eShcIlwiKSk7IC8vIHJlc2V0IHNpIG9rXHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoIWlucHV0LmNoZWNrVmFsaWRpdHkoKSkge1xyXG4gICAgICBpbnB1dC5yZXBvcnRWYWxpZGl0eSgpOyAvLyBkw6ljbGVuY2hlIGxlIHRvb2x0aXAgZHUgbmF2aWdhdGV1clxyXG4gICAgICB2YWxpZCA9IGZhbHNlO1xyXG4gICAgICBicmVhaztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHJldHVybiB2YWxpZDtcclxufVxyXG5cclxuXHJcbm5leHRCdG5zLmZvckVhY2goYnRuID0+IHtcclxuICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIGlmICh2YWxpZGF0ZVN0ZXAoY3VycmVudFN0ZXApKSB7XHJcbiAgICAgIGN1cnJlbnRTdGVwKys7XHJcbiAgICAgIHVwZGF0ZUZvcm1TdGVwcygpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG59KTtcclxuXHJcbiAgLy8gUHLDqWPDqWRlbnRcclxuICBwcmV2QnRucy5mb3JFYWNoKGJ0biA9PiB7XHJcbiAgICBidG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgY3VycmVudFN0ZXAtLTtcclxuICAgICAgdXBkYXRlRm9ybVN0ZXBzKCk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuICBcclxuICAvLyBTb3VtaXNzaW9uIGZpbmFsZVxyXG52YXIgYXVkaXQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImF1ZGl0LWZvcm1cIilcclxuaWYgKGF1ZGl0KVxyXG4gIGF1ZGl0LmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgYXN5bmMgKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuXHJcbiAgICBjb25zdCBmb3JtRGF0YSA9IG5ldyBGb3JtRGF0YShlLnRhcmdldCk7XHJcbiAgICBjb25zdCBkYXRhID0gT2JqZWN0LmZyb21FbnRyaWVzKGZvcm1EYXRhLmVudHJpZXMoKSk7XHJcblxyXG4gICAgY29uc3QgdG9rZW4gPSBncmVjYXB0Y2hhLmdldFJlc3BvbnNlKCk7XHJcbiAgICBpZiAoIXRva2VuKSB7XHJcbiAgICAgIGFsZXJ0KFwiVmV1aWxsZXogdmFsaWRlciBsZSByZUNBUFRDSEEuXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBkYXRhLnRva2VuID0gdG9rZW47XHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnL2FwaS9jb250YWN0L3NlbmRCaWxhbicsIHtcclxuICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICBoZWFkZXJzOiB7ICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSxcclxuICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxyXG4gICAgICB9KTtcclxuICAgICAgY29uc3QgcmVzID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICBhbGVydChyZXMubWVzc2FnZSB8fCBcIkZvcm11bGFpcmUgZW52b3nDqSAhXCIpO1xyXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICBlLnRhcmdldC5yZXNldCgpO1xyXG4gICAgICAgIGdyZWNhcHRjaGEucmVzZXQoKTtcclxuICAgICAgICBjdXJyZW50U3RlcCA9IDA7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycikge1xyXG4gICAgICBhbGVydChcIkVycmV1ciBsb3JzIGRlIGwnZW52b2lcIik7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgIH1cclxuICB9KTtcclxufSk7Il0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///699\n\n}')}},__webpack_exports__={};__webpack_modules__[699]()})();